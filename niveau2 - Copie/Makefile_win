CFLAGS = -O3 -Dmain=SDL_main 
LDFLAGS = -lm -lmingw32 -lSDL2main -lSDL2
SDL2_INCLUDE_DIR = "..\..\..\SDL2-2.0.20\x86_64-w64-mingw32\include"
SDL2_LIBRARIES_DIR = "..\..\..\SDL2-2.0.20\x86_64-w64-mingw32\lib"
INC = sdl2-light.h SDL_data.h SDL_graphics.h constantes.h struct.h
SRC = main.c sdl2-light.c sdl_data.c sdl_graphics.c
OBJ = $(SRC:%.c=%.o)
PROG = spacebattle.exe
CC=gcc



%.o: %.c $(INC)
	gcc $(CFLAGS) -c $< 

$(PROG): $(OBJ)
	gcc $(CFLAGS) $(OBJ) $(LDFLAGS) -o $@ -L "..\..\..\SDL2-2.0.20\x86_64-w64-mingw32\lib"

doc: $(PROG)
	doxygen $(PROG)

test.exe: tests.o sdl_data.o
	gcc $(CFLAGS) $^ $(LDFLAGS) -o $@ -L "..\..\..\SDL2-2.0.20\x86_64-w64-mingw32\lib"

tests.o:tests.c
	gcc $(CFLAGS) -c $< 


.PHONY: clean test
clean:
	del /f /q *.o *~ $(PROG)
	rd /s /q latex html
